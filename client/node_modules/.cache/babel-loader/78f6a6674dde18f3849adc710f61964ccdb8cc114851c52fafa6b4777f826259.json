{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Slim Shady\\\\Desktop\\\\project-x\\\\client\\\\src\\\\layouts\\\\adminPages\\\\addNewProduct.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport TextField from \"../../forms/textField\";\nimport { validator } from \"../../utils/validator\";\nimport validatorConfig from \"../../utils/validatorConfig\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCategory } from \"../../store/categoryOfProduct\";\nimport SelectedForm from \"../../forms/selectedField\";\nimport productSerivce from \"../../services/product.service\";\nimport { useHistory } from \"react-router-dom\";\nimport { loadNewProduct } from \"../../store/product\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddNewProduct = () => {\n  _s();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const categoryState = useSelector(getCategory());\n  const [categ, setCategory] = useState();\n  const [errors, setErrors] = useState({});\n  const [data, setData] = useState({\n    name: \"\",\n    firm: \"\",\n    price: \"\",\n    img: \"\",\n    _id: \"\",\n    category: \"\",\n    quantity: [{\n      size: \"XL\",\n      value: 0\n    }, {\n      size: \"XXL\",\n      value: 0\n    }, {\n      size: \"XS\",\n      value: 0\n    }, {\n      size: \"M\",\n      value: 0\n    }]\n  });\n  const handleChange = e => {\n    setData(prevState => ({\n      ...prevState,\n      [e.target.name]: e.target.value\n    }));\n  };\n  useEffect(() => {\n    setCategory(categoryState);\n    validate();\n  }, [data]);\n  const validate = () => {\n    const errors = validator(data, validatorConfig);\n    setErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n  const isValid = Object.keys(errors).length === 0;\n  const handleSubmit = e => {\n    e.preventDefault();\n    const isValid = validate();\n    if (!isValid) return;\n    productSerivce.createProduct(data);\n    dispatch(loadNewProduct(data));\n    history.push(\"/\");\n    setTimeout(() => {\n      window.location.reload();\n    }, 1000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 offset-md-3 shadow p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            value: data.name,\n            error: errors.name,\n            name: \"name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            label: \"\\u0424\\u0438\\u0440\\u043C\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            value: data.firm,\n            error: errors.firm,\n            name: \"firm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            label: \"\\u0426\\u0435\\u043D\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            value: data.price,\n            error: errors.price,\n            name: \"price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            label: \"\\u0424\\u043E\\u0442\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            value: data.img,\n            error: errors.img,\n            name: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            label: \"Id \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            value: data._id,\n            error: errors._id,\n            name: \"_id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectedForm, {\n            value: data.category,\n            data: categ,\n            label: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n            onChange: handleChange,\n            defaultOption: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442\",\n            error: errors.category,\n            name: \"category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isValid,\n            className: \"btn btn-primary w-100 mx-auto\",\n            children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(AddNewProduct, \"0BHlp+6qyPcaTvE/edHAmBafviM=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n_c = AddNewProduct;\nexport default AddNewProduct;\nvar _c;\n$RefreshReg$(_c, \"AddNewProduct\");","map":{"version":3,"names":["React","useState","useEffect","TextField","validator","validatorConfig","useDispatch","useSelector","getCategory","SelectedForm","productSerivce","useHistory","loadNewProduct","AddNewProduct","history","dispatch","categoryState","categ","setCategory","errors","setErrors","data","setData","name","firm","price","img","_id","category","quantity","size","value","handleChange","e","prevState","target","validate","Object","keys","length","isValid","handleSubmit","preventDefault","createProduct","push","setTimeout","window","location","reload"],"sources":["C:/Users/Slim Shady/Desktop/project-x/client/src/layouts/adminPages/addNewProduct.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TextField from \"../../forms/textField\";\r\nimport { validator } from \"../../utils/validator\";\r\nimport validatorConfig from \"../../utils/validatorConfig\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getCategory } from \"../../store/categoryOfProduct\";\r\nimport SelectedForm from \"../../forms/selectedField\";\r\nimport productSerivce from \"../../services/product.service\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { loadNewProduct } from \"../../store/product\";\r\n\r\nconst AddNewProduct = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const categoryState = useSelector(getCategory());\r\n  const [categ, setCategory] = useState();\r\n  const [errors, setErrors] = useState({});\r\n  const [data, setData] = useState({\r\n    name: \"\",\r\n    firm: \"\",\r\n    price: \"\",\r\n    img: \"\",\r\n    _id: \"\",\r\n    category: \"\",\r\n    quantity: [\r\n      { size: \"XL\", value: 0 },\r\n      { size: \"XXL\", value: 0 },\r\n      { size: \"XS\", value: 0 },\r\n      { size: \"M\", value: 0 },\r\n    ],\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    setData((prevState) => ({\r\n      ...prevState,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCategory(categoryState);\r\n    validate();\r\n  }, [data]);\r\n\r\n  const validate = () => {\r\n    const errors = validator(data, validatorConfig);\r\n    setErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n  const isValid = Object.keys(errors).length === 0;\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const isValid = validate();\r\n    if (!isValid) return;\r\n    productSerivce.createProduct(data);\r\n    dispatch(loadNewProduct(data));\r\n    history.push(\"/\");\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-md-3 shadow p-4\">\r\n          <form onSubmit={handleSubmit}>\r\n            {<h2>Добавить продукт</h2>}\r\n            <TextField\r\n              type=\"text\"\r\n              label=\"Название товара\"\r\n              onChange={handleChange}\r\n              value={data.name}\r\n              error={errors.name}\r\n              name=\"name\"\r\n            />\r\n            <TextField\r\n              type=\"text\"\r\n              label=\"Фирма товара\"\r\n              onChange={handleChange}\r\n              value={data.firm}\r\n              error={errors.firm}\r\n              name=\"firm\"\r\n            />\r\n            <TextField\r\n              type=\"text\"\r\n              label=\"Цена товара\"\r\n              onChange={handleChange}\r\n              value={data.price}\r\n              error={errors.price}\r\n              name=\"price\"\r\n            />\r\n            <TextField\r\n              type=\"text\"\r\n              label=\"Фото товара\"\r\n              onChange={handleChange}\r\n              value={data.img}\r\n              error={errors.img}\r\n              name=\"img\"\r\n            />\r\n            <TextField\r\n              type=\"text\"\r\n              label=\"Id товара\"\r\n              onChange={handleChange}\r\n              value={data._id}\r\n              error={errors._id}\r\n              name=\"_id\"\r\n            />\r\n            <SelectedForm\r\n              value={data.category}\r\n              data={categ}\r\n              label=\"Выберите категорию товара\"\r\n              onChange={handleChange}\r\n              defaultOption=\"Выберите вариант\"\r\n              error={errors.category}\r\n              name=\"category\"\r\n            />\r\n\r\n            <button\r\n              disabled={!isValid}\r\n              className=\"btn btn-primary w-100 mx-auto\"\r\n            >\r\n              Отправить\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddNewProduct;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,uBAAuB;AAC7C,SAASC,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,eAAe,MAAM,6BAA6B;AACzD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,WAAW,QAAQ,+BAA+B;AAC3D,OAAOC,YAAY,MAAM,2BAA2B;AACpD,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,cAAc,QAAQ,qBAAqB;AAAC;AAErD,MAAMC,aAAa,GAAG,MAAM;EAAA;EAC1B,MAAMC,OAAO,GAAGH,UAAU,EAAE;EAC5B,MAAMI,QAAQ,GAAGT,WAAW,EAAE;EAC9B,MAAMU,aAAa,GAAGT,WAAW,CAACC,WAAW,EAAE,CAAC;EAChD,MAAM,CAACS,KAAK,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,EAAE;EACvC,MAAM,CAACkB,MAAM,EAAEC,SAAS,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACoB,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC;IAC/BsB,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,CACR;MAAEC,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAE,CAAC,EACxB;MAAED,IAAI,EAAE,KAAK;MAAEC,KAAK,EAAE;IAAE,CAAC,EACzB;MAAED,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAE,CAAC,EACxB;MAAED,IAAI,EAAE,GAAG;MAAEC,KAAK,EAAE;IAAE,CAAC;EAE3B,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1BX,OAAO,CAAEY,SAAS,KAAM;MACtB,GAAGA,SAAS;MACZ,CAACD,CAAC,CAACE,MAAM,CAACZ,IAAI,GAAGU,CAAC,CAACE,MAAM,CAACJ;IAC5B,CAAC,CAAC,CAAC;EACL,CAAC;EAED7B,SAAS,CAAC,MAAM;IACdgB,WAAW,CAACF,aAAa,CAAC;IAC1BoB,QAAQ,EAAE;EACZ,CAAC,EAAE,CAACf,IAAI,CAAC,CAAC;EAEV,MAAMe,QAAQ,GAAG,MAAM;IACrB,MAAMjB,MAAM,GAAGf,SAAS,CAACiB,IAAI,EAAEhB,eAAe,CAAC;IAC/Ce,SAAS,CAACD,MAAM,CAAC;IACjB,OAAOkB,MAAM,CAACC,IAAI,CAACnB,MAAM,CAAC,CAACoB,MAAM,KAAK,CAAC;EACzC,CAAC;EACD,MAAMC,OAAO,GAAGH,MAAM,CAACC,IAAI,CAACnB,MAAM,CAAC,CAACoB,MAAM,KAAK,CAAC;EAChD,MAAME,YAAY,GAAIR,CAAC,IAAK;IAC1BA,CAAC,CAACS,cAAc,EAAE;IAClB,MAAMF,OAAO,GAAGJ,QAAQ,EAAE;IAC1B,IAAI,CAACI,OAAO,EAAE;IACd9B,cAAc,CAACiC,aAAa,CAACtB,IAAI,CAAC;IAClCN,QAAQ,CAACH,cAAc,CAACS,IAAI,CAAC,CAAC;IAC9BP,OAAO,CAAC8B,IAAI,CAAC,GAAG,CAAC;IACjBC,UAAU,CAAC,MAAM;MACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IAC1B,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,oBACE;IAAK,SAAS,EAAC,gBAAgB;IAAA,uBAC7B;MAAK,SAAS,EAAC,KAAK;MAAA,uBAClB;QAAK,SAAS,EAAC,iCAAiC;QAAA,uBAC9C;UAAM,QAAQ,EAAEP,YAAa;UAAA,wBAC1B;YAAA,UAAI;UAAgB;YAAA;YAAA;YAAA;UAAA,QAAK,eAC1B,QAAC,SAAS;YACR,IAAI,EAAC,MAAM;YACX,KAAK,EAAC,uFAAiB;YACvB,QAAQ,EAAET,YAAa;YACvB,KAAK,EAAEX,IAAI,CAACE,IAAK;YACjB,KAAK,EAAEJ,MAAM,CAACI,IAAK;YACnB,IAAI,EAAC;UAAM;YAAA;YAAA;YAAA;UAAA,QACX,eACF,QAAC,SAAS;YACR,IAAI,EAAC,MAAM;YACX,KAAK,EAAC,qEAAc;YACpB,QAAQ,EAAES,YAAa;YACvB,KAAK,EAAEX,IAAI,CAACG,IAAK;YACjB,KAAK,EAAEL,MAAM,CAACK,IAAK;YACnB,IAAI,EAAC;UAAM;YAAA;YAAA;YAAA;UAAA,QACX,eACF,QAAC,SAAS;YACR,IAAI,EAAC,MAAM;YACX,KAAK,EAAC,+DAAa;YACnB,QAAQ,EAAEQ,YAAa;YACvB,KAAK,EAAEX,IAAI,CAACI,KAAM;YAClB,KAAK,EAAEN,MAAM,CAACM,KAAM;YACpB,IAAI,EAAC;UAAO;YAAA;YAAA;YAAA;UAAA,QACZ,eACF,QAAC,SAAS;YACR,IAAI,EAAC,MAAM;YACX,KAAK,EAAC,+DAAa;YACnB,QAAQ,EAAEO,YAAa;YACvB,KAAK,EAAEX,IAAI,CAACK,GAAI;YAChB,KAAK,EAAEP,MAAM,CAACO,GAAI;YAClB,IAAI,EAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QACV,eACF,QAAC,SAAS;YACR,IAAI,EAAC,MAAM;YACX,KAAK,EAAC,yCAAW;YACjB,QAAQ,EAAEM,YAAa;YACvB,KAAK,EAAEX,IAAI,CAACM,GAAI;YAChB,KAAK,EAAER,MAAM,CAACQ,GAAI;YAClB,IAAI,EAAC;UAAK;YAAA;YAAA;YAAA;UAAA,QACV,eACF,QAAC,YAAY;YACX,KAAK,EAAEN,IAAI,CAACO,QAAS;YACrB,IAAI,EAAEX,KAAM;YACZ,KAAK,EAAC,8IAA2B;YACjC,QAAQ,EAAEe,YAAa;YACvB,aAAa,EAAC,6FAAkB;YAChC,KAAK,EAAEb,MAAM,CAACS,QAAS;YACvB,IAAI,EAAC;UAAU;YAAA;YAAA;YAAA;UAAA,QACf,eAEF;YACE,QAAQ,EAAE,CAACY,OAAQ;YACnB,SAAS,EAAC,+BAA+B;YAAA,UAC1C;UAED;YAAA;YAAA;YAAA;UAAA,QAAS;QAAA;UAAA;UAAA;UAAA;QAAA;MACJ;QAAA;QAAA;QAAA;MAAA;IACH;MAAA;MAAA;MAAA;IAAA;EACF;IAAA;IAAA;IAAA;EAAA,QACF;AAEV,CAAC;AAAC,GAtHI3B,aAAa;EAAA,QACDF,UAAU,EACTL,WAAW,EACNC,WAAW;AAAA;AAAA,KAH7BM,aAAa;AAwHnB,eAAeA,aAAa;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}