{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Slim Shady\\\\Desktop\\\\project-x\\\\client\\\\src\\\\layouts\\\\page\\\\bascet.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"../layouts.styles/bascet.module.css\";\nimport Counter from \"./counter\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport userService from \"../../services/user.service\";\nimport NotBascet from \"../../ui/notBascet\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUsers } from \"../../store/users\";\nimport orderService from \"../../services/orders.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Bascet = () => {\n  _s();\n  const currentUser = useSelector(getCurrentUsers());\n  const itemFrobBascet = orderService.getBascetPurchases();\n  const history = useHistory();\n  const [amount, setAmount] = useState(0);\n  const [acceptDatafromBascet, setAcceptedData] = useState();\n  useEffect(() => {\n    itemFrobBascet.then(res => {\n      const toFormat = Object.keys(res).map(item => res[item]);\n      setAcceptedData(toFormat);\n      toFormat.map(item => {\n        item.quantity.forEach(quan => {\n          setAmount(prevState => prevState += Number(item.price) * quan.value);\n        });\n      });\n    }).catch(error => error.message);\n  }, []);\n  const handleIncrementAmount = price => {\n    setAmount(prevState => prevState += Number(price));\n  };\n  const handleDecrementAmount = price => {\n    setAmount(prevState => prevState -= Number(price));\n  };\n  async function overWriting(balance) {\n    try {\n      const data = await userService.getRefreshUser(balance);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  const handleClick = () => {\n    if (currentUser === undefined || currentUser === null) {\n      toast.error(\"Вам необходимо зарегестрироваться\");\n    } else if (currentUser.balance < amount) {\n      toast.error(\"Сумма заказа превышает баланс\");\n    }\n    if (currentUser.balance >= amount) {\n      const remainingBalacne = currentUser.balance - amount;\n      overWriting(remainingBalacne);\n      history.push(\"/order\");\n    }\n  };\n  return acceptDatafromBascet === undefined ? /*#__PURE__*/_jsxDEV(NotBascet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.main_div,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: styles.countAmount,\n      children: [\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430 \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435 : \", amount, \"$\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: styles.balance_title,\n      children: [\"\\u0412\\u0430\\u0448 \\u0411\\u0430\\u043B\\u0430\\u043D\\u0441 : \", currentUser ? currentUser.balance : 0, \"$\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), acceptDatafromBascet.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.product_div,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: item.img[0],\n        alt: \"\",\n        className: styles.img_product\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.first_div,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title_product,\n          children: \"\\u0418\\u043C\\u044F \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title_review,\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.second_div,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title_product,\n          children: \"\\u0426\\u0435\\u043D\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title_review,\n          children: [item.price, \"$\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.third_block,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.title_product,\n          children: \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440\\u044B \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Counter, {\n          data: item,\n          quantity: item.quantity,\n          handleDecrementAmount: handleDecrementAmount,\n          handleIncrementAmount: handleIncrementAmount\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, item._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.block_finish_order,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.button_added_finish_order,\n        onClick: handleClick,\n        children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(Bascet, \"B3WQYOTCNbzGSW5Uf7CsgaQEI68=\", false, function () {\n  return [useSelector, useHistory];\n});\n_c = Bascet;\nexport default Bascet;\nvar _c;\n$RefreshReg$(_c, \"Bascet\");","map":{"version":3,"names":["React","useEffect","useState","styles","Counter","useHistory","toast","userService","NotBascet","useSelector","getCurrentUsers","orderService","Bascet","currentUser","itemFrobBascet","getBascetPurchases","history","amount","setAmount","acceptDatafromBascet","setAcceptedData","then","res","toFormat","Object","keys","map","item","quantity","forEach","quan","prevState","Number","price","value","catch","error","message","handleIncrementAmount","handleDecrementAmount","overWriting","balance","data","getRefreshUser","console","log","handleClick","undefined","remainingBalacne","push","main_div","countAmount","balance_title","product_div","img","img_product","first_div","title_product","title_review","name","second_div","third_block","_id","block_finish_order","button_added_finish_order"],"sources":["C:/Users/Slim Shady/Desktop/project-x/client/src/layouts/page/bascet.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"../layouts.styles/bascet.module.css\";\r\nimport Counter from \"./counter\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport userService from \"../../services/user.service\";\r\nimport NotBascet from \"../../ui/notBascet\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCurrentUsers } from \"../../store/users\";\r\nimport orderService from \"../../services/orders.service\";\r\nconst Bascet = () => {\r\n  const currentUser = useSelector(getCurrentUsers());\r\n  const itemFrobBascet = orderService.getBascetPurchases();\r\n  const history = useHistory();\r\n  const [amount, setAmount] = useState(0);\r\n  const [acceptDatafromBascet, setAcceptedData] = useState();\r\n\r\n  useEffect(() => {\r\n    itemFrobBascet\r\n      .then((res) => {\r\n        const toFormat = Object.keys(res).map((item) => res[item]);\r\n        setAcceptedData(toFormat);\r\n        toFormat.map((item) => {\r\n          item.quantity.forEach((quan) => {\r\n            setAmount(\r\n              (prevState) => (prevState += Number(item.price) * quan.value)\r\n            );\r\n          });\r\n        });\r\n      })\r\n      .catch((error) => error.message);\r\n  }, []);\r\n\r\n  const handleIncrementAmount = (price) => {\r\n    setAmount((prevState) => (prevState += Number(price)));\r\n  };\r\n  const handleDecrementAmount = (price) => {\r\n    setAmount((prevState) => (prevState -= Number(price)));\r\n  };\r\n\r\n  async function overWriting(balance) {\r\n    try {\r\n      const data = await userService.getRefreshUser(balance);\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  const handleClick = () => {\r\n    if (currentUser === undefined || currentUser === null) {\r\n      toast.error(\"Вам необходимо зарегестрироваться\");\r\n    } else if (currentUser.balance < amount) {\r\n      toast.error(\"Сумма заказа превышает баланс\");\r\n    }\r\n\r\n    if (currentUser.balance >= amount) {\r\n      const remainingBalacne = currentUser.balance - amount;\r\n      overWriting(remainingBalacne);\r\n      history.push(\"/order\");\r\n    }\r\n  };\r\n  return acceptDatafromBascet === undefined ? (\r\n    <NotBascet />\r\n  ) : (\r\n    <div className={styles.main_div}>\r\n      <h2 className={styles.countAmount}>\r\n        Общая стоимость товара в корзине : {amount}$\r\n      </h2>\r\n      <h2 className={styles.balance_title}>\r\n        Ваш Баланс : {currentUser ? currentUser.balance : 0}$\r\n      </h2>\r\n      {acceptDatafromBascet.map((item) => (\r\n        <div className={styles.product_div} key={item._id}>\r\n          <img src={item.img[0]} alt=\"\" className={styles.img_product} />\r\n          <div className={styles.first_div}>\r\n            <h2 className={styles.title_product}>Имя продукта</h2>\r\n            <h2 className={styles.title_review}>{item.name}</h2>\r\n          </div>\r\n          <div className={styles.second_div}>\r\n            <h2 className={styles.title_product}>Цена товара</h2>\r\n            <h2 className={styles.title_review}>{item.price}$</h2>\r\n          </div>\r\n          <div className={styles.third_block}>\r\n            <h2 className={styles.title_product}>Размеры товара</h2>\r\n            {\r\n              <Counter\r\n                data={item}\r\n                quantity={item.quantity}\r\n                key={item._id}\r\n                handleDecrementAmount={handleDecrementAmount}\r\n                handleIncrementAmount={handleIncrementAmount}\r\n              />\r\n            }\r\n          </div>\r\n        </div>\r\n      ))}\r\n      <div className={styles.block_finish_order}>\r\n        <button\r\n          className={styles.button_added_finish_order}\r\n          onClick={handleClick}\r\n        >\r\n          Оформить заказ\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Bascet;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}