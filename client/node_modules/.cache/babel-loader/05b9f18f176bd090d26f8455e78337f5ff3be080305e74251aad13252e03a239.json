{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Slim Shady\\\\Desktop\\\\project-x\\\\client\\\\src\\\\layouts\\\\page\\\\counter.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"../layouts.styles/bascet.module.css\";\nimport servicesBascet from \"../../utils/bascetServices\";\nimport orderService from \"../../services/orders.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Counter = _ref => {\n  _s();\n  let {\n    data,\n    quantity,\n    handleDecrementAmount,\n    handleIncrementAmount\n  } = _ref;\n  const [countDec, setCountInc] = useState();\n  const [countInc, setCountDec] = useState();\n  const [initProduct, setInitProduct] = useState();\n  const initialDataFromDb = orderService.getInitiProduct();\n  useEffect(() => {\n    initialDataFromDb.then(res => {\n      const dataFormat = Object.keys(res).map(item => res[item]);\n      setInitProduct(dataFormat);\n    }).catch(error => error.message);\n  }, []);\n  const handleDelete = async e => {\n    await orderService.deleteProductInBascet(e.target.id);\n    window.location.reload();\n  };\n  const handleIncrement = e => {\n    ///filtrade data from quantity\n    const filterQuantityFromData = quantity.filter(item => `${item.size}` === `${e.target.id}`);\n    ///getting data from database with db sizes and values\n    const dataFromDb = initProduct.filter(item => item._id === data._id);\n    const getQuantityFromDb = dataFromDb[0].quantity.filter(item => `${item.size}` === `${e.target.id}`);\n    if (filterQuantityFromData[0].value < getQuantityFromDb[0].value) {\n      handleIncrementAmount(data.price);\n    }\n    servicesBascet.increment(quantity, e, setCountInc, data, initProduct);\n  };\n  const handleDecrement = e => {\n    ///filtrade data from quantity\n    const filterQuantityFromData = quantity.filter(item => `${item.size}` === `${e.target.id}`);\n    ///getting data from database with db sizes and values\n    const dataFromDb = initProduct.filter(item => item._id === data._id);\n    const getQuantityFromDb = dataFromDb[0].quantity.filter(item => `${item.size}` === `${e.target.id}`);\n    if (filterQuantityFromData[0].value === getQuantityFromDb[0].value || filterQuantityFromData[0].value < getQuantityFromDb[0].value) {\n      if (filterQuantityFromData[0].value > 0) {\n        handleDecrementAmount(data.price);\n      }\n    }\n    servicesBascet.decrement(quantity, e, setCountDec, data, initProduct);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [quantity.map(quan => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.button_block,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        id: quan.size,\n        className: styles.button_selected_value,\n        onClick: handleIncrement,\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.button_sizes,\n        children: [quan.size, \"(\", quan.value, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: quan.size,\n        className: styles.button_selected_value,\n        onClick: handleDecrement,\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, quan.size, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.button_delete_block,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.button_delete,\n        onClick: handleDelete,\n        id: data._id,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Counter, \"dnP+Dx4qnBKBHiEvE3ybV+gjQVI=\");\n_c = Counter;\nexport default Counter;\nvar _c;\n$RefreshReg$(_c, \"Counter\");","map":{"version":3,"names":["React","useEffect","useState","styles","servicesBascet","orderService","Counter","data","quantity","handleDecrementAmount","handleIncrementAmount","countDec","setCountInc","countInc","setCountDec","initProduct","setInitProduct","initialDataFromDb","getInitiProduct","then","res","dataFormat","Object","keys","map","item","catch","error","message","handleDelete","e","deleteProductInBascet","target","id","window","location","reload","handleIncrement","filterQuantityFromData","filter","size","dataFromDb","_id","getQuantityFromDb","value","price","increment","handleDecrement","decrement","quan","button_block","button_selected_value","button_sizes","button_delete_block","button_delete"],"sources":["C:/Users/Slim Shady/Desktop/project-x/client/src/layouts/page/counter.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"../layouts.styles/bascet.module.css\";\r\nimport servicesBascet from \"../../utils/bascetServices\";\r\nimport orderService from \"../../services/orders.service\";\r\n\r\nconst Counter = ({\r\n  data,\r\n  quantity,\r\n  handleDecrementAmount,\r\n  handleIncrementAmount,\r\n}) => {\r\n  const [countDec, setCountInc] = useState();\r\n  const [countInc, setCountDec] = useState();\r\n  const [initProduct, setInitProduct] = useState();\r\n  const initialDataFromDb = orderService.getInitiProduct();\r\n\r\n  useEffect(() => {\r\n    initialDataFromDb\r\n      .then((res) => {\r\n        const dataFormat = Object.keys(res).map((item) => res[item]);\r\n        setInitProduct(dataFormat);\r\n      })\r\n      .catch((error) => error.message);\r\n  }, []);\r\n\r\n  const handleDelete = async (e) => {\r\n    await orderService.deleteProductInBascet(e.target.id);\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleIncrement = (e) => {\r\n    ///filtrade data from quantity\r\n    const filterQuantityFromData = quantity.filter(\r\n      (item) => `${item.size}` === `${e.target.id}`\r\n    );\r\n    ///getting data from database with db sizes and values\r\n    const dataFromDb = initProduct.filter((item) => item._id === data._id);\r\n    const getQuantityFromDb = dataFromDb[0].quantity.filter(\r\n      (item) => `${item.size}` === `${e.target.id}`\r\n    );\r\n\r\n    if (filterQuantityFromData[0].value < getQuantityFromDb[0].value) {\r\n      handleIncrementAmount(data.price);\r\n    }\r\n\r\n    servicesBascet.increment(quantity, e, setCountInc, data, initProduct);\r\n  };\r\n\r\n  const handleDecrement = (e) => {\r\n    ///filtrade data from quantity\r\n    const filterQuantityFromData = quantity.filter(\r\n      (item) => `${item.size}` === `${e.target.id}`\r\n    );\r\n    ///getting data from database with db sizes and values\r\n    const dataFromDb = initProduct.filter((item) => item._id === data._id);\r\n    const getQuantityFromDb = dataFromDb[0].quantity.filter(\r\n      (item) => `${item.size}` === `${e.target.id}`\r\n    );\r\n\r\n    if (\r\n      filterQuantityFromData[0].value === getQuantityFromDb[0].value ||\r\n      filterQuantityFromData[0].value < getQuantityFromDb[0].value\r\n    ) {\r\n      if (filterQuantityFromData[0].value > 0) {\r\n        handleDecrementAmount(data.price);\r\n      }\r\n    }\r\n\r\n    servicesBascet.decrement(quantity, e, setCountDec, data, initProduct);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {quantity.map((quan) => (\r\n        <div className={styles.button_block} key={quan.size}>\r\n          <button\r\n            id={quan.size}\r\n            className={styles.button_selected_value}\r\n            onClick={handleIncrement}\r\n          >\r\n            +\r\n          </button>\r\n\r\n          <button className={styles.button_sizes}>\r\n            {quan.size}({quan.value})\r\n          </button>\r\n\r\n          <button\r\n            id={quan.size}\r\n            className={styles.button_selected_value}\r\n            onClick={handleDecrement}\r\n          >\r\n            -\r\n          </button>\r\n        </div>\r\n      ))}\r\n      <div className={styles.button_delete_block}>\r\n        <button\r\n          className={styles.button_delete}\r\n          onClick={handleDelete}\r\n          id={data._id}\r\n        >\r\n          Удалить товар\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Counter;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}